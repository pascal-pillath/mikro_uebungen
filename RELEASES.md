# Instructions for creating a new release

Jupyter-Book is [hosted on the pypi repository](https://pypi.org/project/jupyter-book/).
To create a new release of Jupyter Book, you need to do these things:

## Before you start

1. Ensure that you have push access to the [Jupyter Book pypi repository](https://pypi.org/project/jupyter-book/)
2. Install [the twine package](https://twine.readthedocs.io/en/latest/). This is a package that helps you
   bundle and push new Python package distributions to pip.
3. Install the [github-activity](https://github.com/choldgraf/github-activity) package to generate a changelog.

## To create the release

To create a new release, [open an issue](https://github.com/jupyter/jupyter-book/issues/new) to keep
track of the to-do list for the release. Copy/paste the following markdown into the issue
and check off the boxes as you complete items:


```
- [ ] Ensure that there aren't any extra issues to tackle in
   [the milestone for the next release](https://github.com/jupyter/jupyter-book/milestones?direction=asc&sort=due_date)
- [ ] Label any major bug fixes, enhancements, maintenance, and documentation improvements in the merged PRs
- [ ] Ensure that the [Jupyter Book version number](https://github.com/jupyter/jupyter-book/blob/master/jupyter_book/__init__.py)
   is correct, and remove the `dev0` part of the version number.
   Make a PR with the new number and merge into master.
- [ ] Delete the extra files we don't want to include in the package, currently this is
      everything in::
    - `jupyter_book/book_template/_site`
    - `jupyter_book/book_template/_build`
- [ ] Create a new distribution for Jupyter Book by
   [following the twine release instructions](https://twine.readthedocs.io/en/latest/#using-twine)
- [ ] Confirm that the new version of Jupyter Book [is posted to pypi](https://pypi.org/project/jupyter-book/)
- [ ] Create a new [release on GitHub](https://github.com/jupyter/jupyter-book/releases).

      Call the release simply the version of Jupyter Book you are releasing. Leave the description blank, we'll
      fill it in later.
- [ ] Bump the [Jupyter Book version number](https://github.com/jupyter/jupyter-book/blob/master/jupyter_book/__init__.py) to
   the next minor (or major) release and append `dev0` to the end.
- [ ] **Generate a changelog** using the `github-activity` package.

   * See [here for `github-activity` installation instructions](https://github.com/choldgraf/github-activity#installation).
   * Run the generator with this command:

     ```
     github-activity jupyter/jupyter-book --since <<latest-tag>> --until <<new-release-tag>> --auth <<your-github-api-token>> -o tmp.md
     ```
   * It will create a markdown changelog since the last jupyter-book release, and put it
     in `tmp.md`. Copy the sections about **pull requests** and add it
     to [`CHANGELOG.md`](https://github.com/jupyter/jupyter-book/blob/master/CHANGELOG.md).
     Ensure that the new version looks correct, then commit it to master.
   * Create a release summary that describes the general changes that have been made,
     add it to the changelog generated by `github-activity. Add this to the new section
     of `CHANGELOG.md`.
   * Commit the new changelog and merge it into master.
- [ ] Copy the resulting markdown for the latest release into the GitHub release you just created.
- [ ] Celebrate! You've just released a new version of Jupyter Book!
```